<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Model AI Chatbot | GitHub Inference</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1f6feb;
            --primary-dark: #0969da;
            --bg-dark: #0d1117;
            --bg-darker: #010409;
            --bg-card: #161b22;
            --bg-card-light: #21262d;
            --text-primary: #f0f6fc;
            --text-secondary: #8b949e;
            --text-muted: #484f58;
            --border: #30363d;
            --border-light: #3e4451;
            --success: #3fb950;
            --warning: #d29922;
            --error: #f85149;
            --grok: #8b5cf6;
            --mistral: #10b981;
            --openai: #10a37f;
            --meta: #1877f2;
            --deepseek: #6366f1;
        }

        body {
            background: linear-gradient(135deg, var(--bg-darker), var(--bg-dark));
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            gap: 20px;
            height: 95vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 300px;
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .sidebar-header {
            padding: 24px;
            background: linear-gradient(135deg, var(--bg-card-light), var(--bg-card));
            border-bottom: 1px solid var(--border);
        }

        .sidebar-header h2 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--text-primary), var(--text-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .sidebar-header p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .models-list {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .model-item {
            padding: 16px;
            margin-bottom: 12px;
            background: var(--bg-card-light);
            border-radius: 12px;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .model-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .model-item:hover {
            transform: translateY(-2px);
            border-color: var(--border-light);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .model-item.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, var(--bg-card-light), rgba(31, 111, 235, 0.1));
            box-shadow: 0 4px 16px rgba(31, 111, 235, 0.2);
        }

        .model-item.active::before {
            opacity: 1;
        }

        .model-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .model-provider {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .model-description {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .model-stats {
            display: flex;
            gap: 12px;
            margin-top: 12px;
            font-size: 12px;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--text-muted);
        }

        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid var(--border);
            background: var(--bg-card);
        }

        .usage-stats {
            background: var(--bg-card-light);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .usage-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-secondary);
        }

        .usage-bar {
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .usage-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--success));
            border-radius: 3px;
            width: 35%;
        }

        .usage-text {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
        }

        /* Main Chat Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid var(--border);
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .chat-header {
            padding: 20px 24px;
            background: linear-gradient(135deg, var(--bg-card-light), var(--bg-card));
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .current-model {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .model-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
        }

        .openai { background: linear-gradient(135deg, var(--openai), #0d8b6f); }
        .mistral { background: linear-gradient(135deg, var(--mistral), #0d9c6f); }
        .meta { background: linear-gradient(135deg, var(--meta), #1666c6); }
        .deepseek { background: linear-gradient(135deg, var(--deepseek), #4f46e5); }
        .grok { background: linear-gradient(135deg, var(--grok), #7c3aed); }

        .model-title h3 {
            font-size: 18px;
            font-weight: 700;
        }

        .model-title p {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            padding: 10px 16px;
            background: var(--bg-card-light);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .action-btn:hover {
            background: var(--bg-card);
            border-color: var(--border-light);
            color: var(--text-primary);
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
        }

        .action-btn.primary:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            box-shadow: 0 4px 12px rgba(31, 111, 235, 0.3);
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: var(--bg-dark);
        }

        .message {
            max-width: 80%;
            padding: 0;
            border-radius: 16px;
            position: relative;
            animation: messageSlide 0.4s ease;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            align-self: flex-end;
        }

        .bot-message {
            align-self: flex-start;
        }

        .message-bubble {
            padding: 16px 20px;
            border-radius: 16px;
            line-height: 1.5;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .user-message .message-bubble {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-bottom-right-radius: 4px;
        }

        .bot-message .message-bubble {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-bottom-left-radius: 4px;
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .model-badge {
            background: rgba(31, 111, 235, 0.15);
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .message-timestamp {
            color: var(--text-muted);
            font-size: 11px;
        }

        .message-content {
            line-height: 1.6;
        }

        .typing-indicator {
            align-self: flex-start;
            padding: 16px 20px;
            border-radius: 16px;
            display: none;
            background: var(--bg-card);
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-bottom-left-radius: 4px;
        }

        .typing-content {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dots span {
            height: 8px;
            width: 8px;
            background-color: var(--text-secondary);
            border-radius: 50%;
            display: inline-block;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        .typing-text {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .input-container {
            padding: 20px 24px;
            background: var(--bg-card);
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .input-container input {
            width: 100%;
            padding: 16px 52px 16px 20px;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--bg-card-light);
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .input-container input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(31, 111, 235, 0.2);
        }

        .input-actions {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 8px;
        }

        .input-action {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .input-action:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .send-button {
            padding: 16px 24px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(31, 111, 235, 0.3);
        }

        .send-button:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(31, 111, 235, 0.4);
        }

        .send-button:disabled {
            background: var(--border);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--bg-card), var(--bg-card-light));
            border-radius: 16px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .welcome-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .welcome-message h3 {
            color: var(--text-primary);
            margin-bottom: 12px;
            font-size: 24px;
        }

        .welcome-message p {
            color: var(--text-secondary);
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }

        .error-message {
            color: var(--error);
            background: rgba(248, 81, 73, 0.1);
            padding: 12px 16px;
            border-radius: 12px;
            margin: 10px 24px;
            text-align: center;
            display: none;
            border: 1px solid rgba(248, 81, 73, 0.3);
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Model-specific colors */
        .openai-badge { background: rgba(16, 163, 127, 0.15); color: var(--openai); }
        .mistral-badge { background: rgba(16, 185, 129, 0.15); color: var(--mistral); }
        .meta-badge { background: rgba(24, 119, 242, 0.15); color: var(--meta); }
        .deepseek-badge { background: rgba(99, 102, 241, 0.15); color: var(--deepseek); }
        .grok-badge { background: rgba(139, 92, 246, 0.15); color: var(--grok); }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
                height: auto;
            }
            
            .sidebar {
                width: 100%;
                max-height: 300px;
            }
            
            .models-list {
                display: flex;
                overflow-x: auto;
                gap: 12px;
                padding: 16px;
            }
            
            .model-item {
                min-width: 250px;
                margin-bottom: 0;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .message {
                max-width: 90%;
            }
            
            .chat-header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }
            
            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-card-light);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--border-light);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar with Model Selection -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>AI Models</h2>
                <p>Select from advanced AI models</p>
            </div>
            
            <div class="models-list" id="modelsList">
                <!-- Models will be populated by JavaScript -->
            </div>
            
            <div class="sidebar-footer">
                <div class="usage-stats">
                    <div class="usage-title">API Usage</div>
                    <div class="usage-bar">
                        <div class="usage-fill"></div>
                    </div>
                    <div class="usage-text">
                        <span>35% of monthly limit</span>
                        <span>2.1K / 6K tokens</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Chat Area -->
        <div class="main-content">
            <div class="chat-header">
                <div class="current-model">
                    <div class="model-icon openai" id="currentModelIcon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="model-title">
                        <h3 id="currentModelName">GPT-4.1</h3>
                        <p id="currentModelDesc">Advanced reasoning model with strong performance across domains</p>
                    </div>
                </div>
                
                <div class="header-actions">
                    <button class="action-btn" id="clearChat">
                        <i class="fas fa-trash"></i>
                        Clear Chat
                    </button>
                    <button class="action-btn" id="exportChat">
                        <i class="fas fa-download"></i>
                        Export
                    </button>
                    <button class="action-btn primary" id="newChat">
                        <i class="fas fa-plus"></i>
                        New Chat
                    </button>
                </div>
            </div>
            
            <div class="error-message" id="errorMessage"></div>
            
            <div class="chat-container" id="chatContainer">
                <div class="welcome-message">
                    <div class="welcome-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>Welcome to Multi-Model AI Chat</h3>
                    <p>Select different AI models from the sidebar to experience their unique capabilities. Each model has different strengths in reasoning, coding, creativity, and conversation.</p>
                </div>
                
                <div class="message bot-message">
                    <div class="message-bubble">
                        <div class="message-header">
                            <span class="model-badge openai-badge">
                                <i class="fas fa-robot"></i>
                                GPT-4.1
                            </span>
                            <span class="message-timestamp" id="initialTimestamp"></span>
                        </div>
                        <div class="message-content">
                            Hello! I'm your AI assistant powered by GPT-4.1. I'm here to help with any questions or tasks you might have. Feel free to switch between different AI models using the sidebar to find the one that best suits your needs!
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-content">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="typing-text" id="typingText">GPT-4.1 is thinking...</div>
                </div>
            </div>
            
            <div class="input-container">
                <div class="input-wrapper">
                    <input type="text" id="userInput" placeholder="Ask me anything... (Try different models for varied responses)" autocomplete="off">
                    <div class="input-actions">
                        <button class="input-action" id="attachFile">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="input-action" id="voiceInput">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                </div>
                <button class="send-button" id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                    Send
                </button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const chatContainer = document.getElementById('chatContainer');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const typingText = document.getElementById('typingText');
        const errorMessage = document.getElementById('errorMessage');
        const modelsList = document.getElementById('modelsList');
        const currentModelName = document.getElementById('currentModelName');
        const currentModelDesc = document.getElementById('currentModelDesc');
        const currentModelIcon = document.getElementById('currentModelIcon');
        const clearChatBtn = document.getElementById('clearChat');
        const newChatBtn = document.getElementById('newChat');
        const exportChatBtn = document.getElementById('exportChat');
        const attachFileBtn = document.getElementById('attachFile');
        const voiceInputBtn = document.getElementById('voiceInput');
        const initialTimestamp = document.getElementById('initialTimestamp');

        // Set initial timestamp
        initialTimestamp.textContent = new Date().toLocaleTimeString();

        // API Configuration
        const endpoint = "https://models.github.ai/inference";
        const apiKey = "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";

        // Model information with enhanced details
        const modelDetails = {
            "openai/gpt-4.1": {
                name: "GPT-4.1",
                description: "Advanced reasoning model with strong performance across domains",
                provider: "OpenAI",
                icon: "fas fa-brain",
                color: "openai",
                capabilities: ["Reasoning", "Analysis", "Creative Writing"],
                speed: "Medium",
                context: "128K tokens"
            },
            "openai/gpt-4.1-mini": {
                name: "GPT-4.1 Mini",
                description: "Efficient version of GPT-4.1 with faster response times",
                provider: "OpenAI",
                icon: "fas fa-bolt",
                color: "openai",
                capabilities: ["Fast Responses", "Efficiency", "General Tasks"],
                speed: "Fast",
                context: "128K tokens"
            },
            "openai/gpt-4.1-nano": {
                name: "GPT-4.1 Nano",
                description: "Lightweight model optimized for speed and efficiency",
                provider: "OpenAI",
                icon: "fas fa-rocket",
                color: "openai",
                capabilities: ["Speed", "Lightweight", "Quick Tasks"],
                speed: "Very Fast",
                context: "64K tokens"
            },
            "deepseek/DeepSeek-V3-0324": {
                name: "DeepSeek R1",
                description: "Specialized in reasoning and complex problem solving",
                provider: "DeepSeek",
                icon: "fas fa-cogs",
                color: "deepseek",
                capabilities: ["Reasoning", "Problem Solving", "Logic"],
                speed: "Medium",
                context: "128K tokens"
            },
            "mistral-ai/Mistral-Large-2411": {
                name: "Mistral Large",
                description: "High-performance model with strong multilingual capabilities",
                provider: "Mistral AI",
                icon: "fas fa-language",
                color: "mistral",
                capabilities: ["Multilingual", "Analysis", "Conversation"],
                speed: "Fast",
                context: "32K tokens"
            },
            "mistral-ai/Codestral-2501": {
                name: "Codestral",
                description: "Specialized in code generation and programming tasks",
                provider: "Mistral AI",
                icon: "fas fa-code",
                color: "mistral",
                capabilities: ["Coding", "Debugging", "Technical Tasks"],
                speed: "Fast",
                context: "32K tokens"
            },
            "meta/Llama-4-Scout-17B-16E-Instruct": {
                name: "Llama 4 Scout",
                description: "Efficient instruction-tuned model for various tasks",
                provider: "Meta",
                icon: "fas fa-mountain",
                color: "meta",
                capabilities: ["General Tasks", "Efficiency", "Instruction Following"],
                speed: "Fast",
                context: "16K tokens"
            },
            "xai/grok-3": {
                name: "Grok-3",
                description: "Advanced model with strong reasoning and conversational abilities",
                provider: "xAI",
                icon: "fas fa-comment-dots",
                color: "grok",
                capabilities: ["Conversation", "Reasoning", "Creative Tasks"],
                speed: "Medium",
                context: "128K tokens"
            },
            "xai/grok-3-mini": {
                name: "Grok-3 Mini",
                description: "Compact version of Grok-3 with faster response times",
                provider: "xAI",
                icon: "fas fa-comment",
                color: "grok",
                capabilities: ["Fast Conversation", "Quick Tasks", "Efficiency"],
                speed: "Fast",
                context: "64K tokens"
            }
        };

        // Conversation history
        let conversationHistory = [
            { 
                role: "system", 
                content: "You are a helpful AI assistant. Provide detailed, accurate, and helpful responses tailored to the user's needs." 
            }
        ];

        // Current model
        let currentModel = "openai/gpt-4.1";

        // Initialize the models list
        function initializeModelsList() {
            modelsList.innerHTML = '';
            
            Object.entries(modelDetails).forEach(([modelId, model]) => {
                const modelItem = document.createElement('div');
                modelItem.className = `model-item ${modelId === currentModel ? 'active' : ''}`;
                modelItem.setAttribute('data-model', modelId);
                
                modelItem.innerHTML = `
                    <div class="model-name">
                        <i class="${model.icon}"></i>
                        ${model.name}
                    </div>
                    <div class="model-provider">${model.provider}</div>
                    <div class="model-description">${model.description}</div>
                    <div class="model-stats">
                        <div class="stat">
                            <i class="fas fa-gauge-high"></i>
                            ${model.speed}
                        </div>
                        <div class="stat">
                            <i class="fas fa-memory"></i>
                            ${model.context}
                        </div>
                    </div>
                `;
                
                modelItem.addEventListener('click', () => switchModel(modelId));
                modelsList.appendChild(modelItem);
            });
        }

        // Switch model function
        function switchModel(modelId) {
            currentModel = modelId;
            const model = modelDetails[modelId];
            
            // Update UI
            currentModelName.textContent = model.name;
            currentModelDesc.textContent = model.description;
            currentModelIcon.className = `model-icon ${model.color}`;
            currentModelIcon.innerHTML = `<i class="${model.icon}"></i>`;
            
            // Update models list active state
            document.querySelectorAll('.model-item').forEach(item => {
                item.classList.toggle('active', item.getAttribute('data-model') === modelId);
            });
            
            // Update typing text
            updateTypingText();
            
            // Add model switch message
            addMessage(`Switched to ${model.name}. How can I help you with this model?`, false, model.name, model.color);
        }

        // Update typing indicator text
        function updateTypingText() {
            const model = modelDetails[currentModel];
            typingText.textContent = `${model.name} is thinking...`;
        }

        // Add message to chat
        function addMessage(text, isUser = false, modelName = null, modelColor = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            const messageBubble = document.createElement('div');
            messageBubble.className = 'message-bubble';
            
            if (!isUser) {
                const messageHeader = document.createElement('div');
                messageHeader.className = 'message-header';
                
                const modelBadge = document.createElement('span');
                modelBadge.className = `model-badge ${modelColor}-badge`;
                modelBadge.innerHTML = `<i class="${modelDetails[currentModel].icon}"></i> ${modelName}`;
                messageHeader.appendChild(modelBadge);
                
                const timestamp = document.createElement('span');
                timestamp.className = 'message-timestamp';
                timestamp.textContent = new Date().toLocaleTimeString();
                messageHeader.appendChild(timestamp);
                
                messageBubble.appendChild(messageHeader);
            }
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.textContent = text;
            messageBubble.appendChild(messageContent);
            
            messageDiv.appendChild(messageBubble);
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Show typing indicator
        function showTyping() {
            updateTypingText();
            typingIndicator.style.display = 'block';
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Hide typing indicator
        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        // Show error message
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 6000);
        }

        // Clear chat function
        function clearChat() {
            // Remove all messages except the welcome message and first bot message
            const messages = chatContainer.querySelectorAll('.message, .welcome-message');
            for (let i = 2; i < messages.length; i++) {
                chatContainer.removeChild(messages[i]);
            }
            
            // Reset conversation history but keep system message
            conversationHistory = [conversationHistory[0]];
            
            // Add a new welcome message
            const model = modelDetails[currentModel];
            addMessage(`Chat cleared! I'm now ready to help you with ${model.name}. What would you like to know?`, false, model.name, model.color);
        }

        // New chat function
        function newChat() {
            // Clear all messages
            chatContainer.innerHTML = '';
            
            // Add welcome message and initial bot message
            const welcomeMsg = document.createElement('div');
            welcomeMsg.className = 'welcome-message';
            welcomeMsg.innerHTML = `
                <div class="welcome-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h3>New Chat Started</h3>
                <p>You're now chatting with ${modelDetails[currentModel].name}. How can I help you today?</p>
            `;
            chatContainer.appendChild(welcomeMsg);
            
            // Reset conversation history
            conversationHistory = [
                { 
                    role: "system", 
                    content: "You are a helpful AI assistant. Provide detailed, accurate, and helpful responses tailored to the user's needs." 
                }
            ];
            
            // Add initial bot message
            addMessage(`Hello! I'm your AI assistant powered by ${modelDetails[currentModel].name}. I'm here to help with any questions or tasks you might have.`, false, modelDetails[currentModel].name, modelDetails[currentModel].color);
        }

        // Export chat function
        function exportChat() {
            const chatText = Array.from(chatContainer.querySelectorAll('.message'))
                .map(msg => {
                    const isUser = msg.classList.contains('user-message');
                    const content = msg.querySelector('.message-content').textContent;
                    const timestamp = msg.querySelector('.message-timestamp')?.textContent || '';
                    return `${isUser ? 'User' : 'AI'} (${timestamp}): ${content}`;
                })
                .join('\n\n');
            
            const blob = new Blob([chatText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ai-chat-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Send message to API
        async function sendMessage() {
            const message = userInput.value.trim();
            if (!message) return;

            // Clear input and disable button
            userInput.value = '';
            sendButton.disabled = true;
            
            const model = modelDetails[currentModel];
            
            // Add user message to chat and conversation history
            addMessage(message, true);
            conversationHistory.push({ role: "user", content: message });

            // Show typing indicator
            showTyping();

            try {
                // Prepare request
                const response = await fetch(`${endpoint}/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        messages: conversationHistory,
                        model: currentModel,
                        max_tokens: 800,
                        temperature: 0.7,
                        top_p: 0.9
                    })
                });

                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`API Error: ${response.status} - ${errorText}`);
                }

                const data = await response.json();
                
                // Hide typing indicator
                hideTyping();
                
                // Add bot response to chat and conversation history
                if (data.choices && data.choices.length > 0) {
                    const botResponse = data.choices[0].message.content;
                    addMessage(botResponse, false, model.name, model.color);
                    conversationHistory.push({ role: "assistant", content: botResponse });
                } else {
                    throw new Error('Unexpected response format from API');
                }
            } catch (error) {
                hideTyping();
                console.error('Error:', error);
                showError(`Failed to get response from ${model.name}: ${error.message}`);
            } finally {
                sendButton.disabled = false;
                userInput.focus();
            }
        }

        // Event Listeners
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        clearChatBtn.addEventListener('click', clearChat);
        newChatBtn.addEventListener('click', newChat);
        exportChatBtn.addEventListener('click', exportChat);
        
        // Placeholder functionality for additional buttons
        attachFileBtn.addEventListener('click', () => {
            showError('File attachment functionality would be implemented in a production version');
        });
        
        voiceInputBtn.addEventListener('click', () => {
            showError('Voice input functionality would be implemented in a production version');
        });

        // Initialize the app
        function init() {
            initializeModelsList();
            userInput.focus();
            
            // Add example questions for quick start
            const exampleQuestions = [
                "Explain quantum computing in simple terms",
                "Write a Python function to sort a list",
                "What are the environmental benefits of solar energy?",
                "Help me plan a healthy meal for the week"
            ];

            // Add example questions to the input placeholder on rotation
            let exampleIndex = 0;
            setInterval(() => {
                userInput.placeholder = `Ask me anything... (e.g., "${exampleQuestions[exampleIndex]}")`;
                exampleIndex = (exampleIndex + 1) % exampleQuestions.length;
            }, 4000);
        }

        // Start the application
        init();
    </script>
</body>
</html>